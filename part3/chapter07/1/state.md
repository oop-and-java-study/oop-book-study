# 상태패턴

> 기능이 상태에 따라 다르게 동작해야 할 때 사용할 수 있는 설계패턴.

- **상태 객체**: 기능을 제공한다. 상태 별 동작 구현을 한다.
- **콘텍스트**: client로 부터 기능 실행 요청을 받으면, 상태 객체에 처리를 위임한다.
- 상태가 많아질 경우 if-else 문을 사용해 구현할 경우 유지보수가 어렵게 만들지만, 상태 패턴을 사용할 경우 코드의 복잡도는 증가하지 않는다.
- 상태에 따른 동작을 구현한 코드가 각 상태 별로 구분되기 떄문에 상태 별 동작을 수정하기 쉽다.

## 적용

- 상태 패턴은 유사한 상태들에 중복 코드가 많고 if-else 기반 상태 변경이 잦을 경우.

## 상태 변경의 주체

> 콘텍스트의 상태 변경을 누가하느냐에 따라 장단점이 있다.

- 상태객체에서 담당
  - 콘텍스트에 영향을 주지 않고 상태를 추가하거나 상태 변경 규칙을 바꿀 수 있다.
  - 다른 상태 클레스에 대한 의존 발생가능성이 있음.
  - 상태 구현 클래스가 많아질 수록 상태 변경 규칙을 파악하기 힘듦.
- 콘텍스트에서 담당
  - 상태 개수가 적고, 상태 변경 규칙에 변경될 가능성이 적을 경우 유리하다.
  - 상태 변경 처리가 복잡해질 수록 상태 변경의 유연함이 떨어짐.

## 구조

![구조](/images/state.png)
(출처: https://refactoring.guru/ko/design-patterns)
